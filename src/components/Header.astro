---
const navItems = [
    { linkText: 'Courses', href: '/courses' },
    { linkText: 'eBooks', href: '/ebooks' },
    { linkText: 'Coaching', href: '/coaching' },
    { linkText: 'About', href: '/about' }
];

const currentPath = Astro.url.pathname;
---

<!-- Announcement Bar -->
<div class="announcement-bar text-center py-2 px-4" style="background-color: #0D9488; color: #ffffff; font-size: 13px; font-family: 'Newsreader', Georgia, serif; margin: 0 -16px; width: calc(100% + 32px);">
    Project-Based AI Experiences for K-12 â€” <a href="/courses" style="color: #ffffff; text-decoration: underline; font-weight: 500;">explore the courses</a>
</div>

<nav class="sticky top-0 z-50 py-4 sm:py-5 safe-top" style="background-color: #F5F0EB;">
    <div class="flex items-center justify-between gap-4">
        <!-- Wordmark Logo with Founders -->
        <a href="/" class="flex-shrink-0" style="text-decoration: none;">
            <span style="font-family: 'Newsreader', Georgia, serif; font-weight: 500; font-size: 1.1rem; color: #1A1A1A; letter-spacing: -0.01em; display: block;">
                PBL Future Labs
            </span>
            <span style="font-family: 'Newsreader', Georgia, serif; font-weight: 400; font-size: 0.7rem; color: #6B6560; letter-spacing: 0.02em; display: block; margin-top: -2px;">
                By Thom Markham, Ph.D. &amp; Phil Alcock
            </span>
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden sm:flex items-center gap-1">
            {navItems.map((item) => (
                <a
                    href={item.href}
                    class="inline-flex items-center px-4 py-2 text-sm min-h-[44px]"
                    style={`font-family: 'Newsreader', Georgia, serif; font-weight: 400; font-size: 14px; letter-spacing: 0.02em; text-decoration: none; transition: color 0.2s ease; color: ${currentPath === item.href ? '#0D9488' : '#1A1A1A'};`}
                >
                    {item.linkText}
                </a>
            ))}
        </div>

        <!-- Mobile: Hamburger -->
        <div class="flex items-center gap-2 sm:hidden">
            <button
                id="mobile-menu-button"
                class="p-3 min-h-[44px] min-w-[44px] flex items-center justify-center"
                style="color: #1A1A1A;"
                aria-label="Toggle mobile menu"
                aria-expanded="false"
            >
                <svg id="menu-icon-open" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
                <svg id="menu-icon-close" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="sm:hidden overflow-hidden transition-all duration-300 ease-out" style="max-height: 0; opacity: 0;">
        <div class="divider-line mt-4"></div>
        <ul class="flex flex-col gap-1 pt-4 pb-2">
            <li>
                <a
                    href="/"
                    class="block px-4 py-4 min-h-[48px]"
                    style={`font-family: 'Newsreader', Georgia, serif; font-weight: 400; font-size: 16px; text-decoration: none; transition: color 0.2s ease; color: ${currentPath === '/' ? '#0D9488' : '#1A1A1A'};`}
                >
                    Home
                </a>
            </li>
            {navItems.map((item) => (
                <li>
                    <a
                        href={item.href}
                        class="block px-4 py-4 min-h-[48px]"
                        style={`font-family: 'Newsreader', Georgia, serif; font-weight: 400; font-size: 16px; text-decoration: none; transition: color 0.2s ease; color: ${currentPath === item.href ? '#0D9488' : '#1A1A1A'};`}
                    >
                        {item.linkText}
                    </a>
                </li>
            ))}
        </ul>
    </div>
</nav>

<script>
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIconOpen = document.getElementById('menu-icon-open');
    const menuIconClose = document.getElementById('menu-icon-close');

    function openMenu() {
        if (!mobileMenu) return;
        mobileMenuButton?.setAttribute('aria-expanded', 'true');
        menuIconOpen?.classList.add('hidden');
        menuIconClose?.classList.remove('hidden');
        mobileMenu.style.maxHeight = mobileMenu.scrollHeight + 'px';
        mobileMenu.style.opacity = '1';
    }

    function closeMenu() {
        if (!mobileMenu) return;
        mobileMenuButton?.setAttribute('aria-expanded', 'false');
        menuIconOpen?.classList.remove('hidden');
        menuIconClose?.classList.add('hidden');
        mobileMenu.style.maxHeight = '0';
        mobileMenu.style.opacity = '0';
    }

    mobileMenuButton?.addEventListener('click', () => {
        const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
        if (isExpanded) {
            closeMenu();
        } else {
            openMenu();
        }
    });
</script>
